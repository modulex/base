modulex.add("base",["modulex-util","modulex-attribute"],function(t,n,e){var r,i=t("modulex-util"),a=t("modulex-attribute");r=function(t){function n(t,n){return function(e){return function(){var r=this;n?e!==f&&e.apply(r,arguments):r.callSuper.apply(r,arguments);var i=arguments.callee.__owner__.__extensions__||[];n&&i.reverse(),s(r,i,t,arguments),n?r.callSuper.apply(r,arguments):e!==f&&e.apply(r,arguments)}}}function e(t){var n=this,e=n.__extensions__,r=n.__hooks__,i=n.prototype;if(e.length&&r)for(var a in r)(!i.hasOwnProperty(a)||t.hasOwnProperty(a))&&(t[a]=t[a]||f);return d.call(n,t)}function r(t){var n,e=this;t.target===e&&(n=e[g+t.type.slice(5).slice(0,-6)],n.call(e,t.newVal,t))}function u(t){var n,e=t.get("plugins");l.each(e,function(t,r){"function"==typeof t&&(n=t,e[r]=new n)})}function o(t,n){var e,r,i=this,a=i.get("plugins");if(n=n||[],n=[i].concat(n),e=a.length)for(var u=0;e>u;u++)r=a[u][t],r&&r.apply(a[u],n)}function s(t,n,e,r){var i;if(i=n&&n.length)for(var a=0;i>a;a++){var u=n[a]&&(e?n[a].prototype[e]:n[a]);u&&u.apply(t,r||[])}}var l=i,c=a,p=l.ucfirst,g="_onSet",f=l.noop,v=c.extend({constructor:function(){var t=this;t.callSuper.apply(t,arguments);var n=t.get("listeners");if(n)for(var e in n)t.on(e,n[e]);t.initializer(),u(t),o.call(t,"pluginInitializer"),t.bindInternal(),t.syncInternal()},initializer:f,__getHook:n,__callPluginsMethod:o,bindInternal:function(){var t,n,e=this,i=e.getAttrs();for(t in i)n=g+p(t),e[n]&&e.on("after"+p(t)+"Change",r)},syncInternal:function(){for(var t,n=this,e=[],r=n.constructor,i=n.getAttrs();r;)e.push(r),r=r.superclass&&r.superclass.constructor;for(e.reverse(),t=0;t<e.length;t++){var a=e[t].ATTRS||{};for(var u in a)if(u in i){var o,s,l=g+p(u);(s=n[l])&&0!==i[u].sync&&void 0!==(o=n.get(u))&&s.call(n,o)}}},plug:function(t){var n=this;if("function"==typeof t){var e=t;t=new e}return t.pluginInitializer&&t.pluginInitializer(n),n.get("plugins").push(t),n},unplug:function(t){var n=[],e=this,r="string"==typeof t;return l.each(e.get("plugins"),function(i){var a,u=0;t&&(r?(a=i.get&&i.get("pluginId")||i.pluginId,a!==t&&(n.push(i),u=1)):i!==t&&(n.push(i),u=1)),u||i.pluginDestructor(e)}),e.setInternal("plugins",n),e},getPlugin:function(t){var n=null;return l.each(this.get("plugins"),function(e){var r=e.get&&e.get("pluginId")||e.pluginId;return r===t?(n=e,!1):void 0}),n},destructor:f,destroy:function(){var t=this,n=l.makeArray(arguments);t.get("destroyed")||(o.call(t,"pluginDestructor",n),t.destructor.apply(t,n),t.set("destroyed",!0),t.fire("destroy"),t.detach())}});l.mix(v,{version:"1.0.6",__hooks__:{initializer:n(),destructor:n("__destructor",!0)},ATTRS:{plugins:{valueFn:function(){return[]}},destroyed:{value:!1},listeners:{}},extend:function h(t,n,r){l.isArray(t)||(r=n,n=t,t=[]);var i=c.extend.call(this,n,r);if(i.__extensions__=t,e.call(i,{}),t.length){var a={},u={};l.each(t.concat(i),function(t){if(t){l.each(t.ATTRS,function(t,n){var e=a[n]=a[n]||{};l.mix(e,t)});var n,e=t.prototype;for(n in e)e.hasOwnProperty(n)&&(u[n]=e[n])}}),i.ATTRS=a,u.constructor=i,l.augment(i,u)}return i.extend=r&&r.extend||h,i.addMembers=e,i}});var d=v.addMembers;return t=v}(),e.exports=r});